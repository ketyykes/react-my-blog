---
title: Rereact club Note + å‰è¨€ â€” Describing the UI - all
slug: 2023-05-13T13:31:00.000Z
date: 2023-05-13T13:31:00.000Z
tags: ["React","Rereact club"]
---

<style> 
.rem25{
font-size:2.5rem;
}
.rem40{
font-size:4.0rem;
}
.rem50{
  font-size:5.0rem;
}
@media (max-width: 576px) {
  .rem25{
    font-size:2rem;
  }
  .rem40{
    font-size:3.0rem;
  }
  .rem50{
    font-size:3.5rem;
  }
}
.red {
color:red;
}
.blue{
color:blue;
}
.code{
background-color:#f7f7f7;
padding :4px;
font-size:0.9rem;
font-weight:700;
}
</style>

## å‰è¨€

æ ¹æ“š[React å®˜æ–¹ Twitter](https://twitter.com/reactjs/status/1636441676506906626)åœ¨ä»Šå¹´çš„ 2023 å¹´ä¸‰æœˆå·²ç¶“æ­£å¼ç™¼å¸ƒäº†ï¼Œå®˜æ–¹åœ¨æ–°ç‰ˆçš„æ–‡ä»¶å…§å®¹ã€‚å°‡ä»¥ Function component å’Œ Hooks ä»‹ç´¹ç¾ä»£ Reactï¼Œä¸¦åŒ…å«äº†æ’åœ–ã€äº’å‹•å¼ç¯„ä¾‹ã€å€‹äººæŒ‘æˆ°ç­‰ç­‰é …ç›®ã€‚å¦å¤–ä¹ŸåŒ…å«äº† Next.js å’Œ Remix çš„ SSR æ¡†æ¶å»ºè­°ï¼Œè«‡åŠåˆ° React æ­·å²å¯ä»¥å›æ­¸ç”± Facebook çš„ Jordan Walke åœ¨ 2012 å¹´å‰µç«‹çš„ï¼Œä¸¦åœ¨ 2013 å¹´çš„ä¸€å€‹ç¾åœ‹æœƒè­°ä¸Šé–‹æºï¼Œåœ¨ 2023 å¹´ 5 æœˆï¼ŒReact å°‡æ…¶ç¥å…¶åé€±å¹´ã€‚React åœ¨å‰ç«¯ç¶²é é–‹ç™¼ä¸­ä½”æœ‰ä¸»å°åœ°ä½ã€‚JavaScript çš„ State èª¿æŸ¥é¡¯ç¤ºï¼Œè‡ª 2016 å¹´ä»¥ä¾†ï¼ŒReact çš„ä½¿ç”¨ç‡ä¸€ç›´åœ¨ç©©å®šä¸Šå‡ï¼Œç›®å‰è¶…é 80%ï¼Œè€Œ Angular çš„ä½¿ç”¨ç‡å·²ç¶“ä¸‹é™åˆ°ä¸åˆ° 50%ã€‚

[èˆŠç‰ˆ React å®˜æ–¹æ–‡ä»¶](https://legacy.reactjs.org/)çš„ç¶²å€å·²ç¶“è®Šæˆ legacy ç‹€æ…‹äº†ï¼Œç‚ºäº†é‡æ–°ç†è§£å®˜æ–¹æ­£å¼ä»¥ Hook ç‚ºå°å‘çš„æ–°ç‰ˆæ–‡ä»¶ä»¥åŠå¸Œæœ›èƒ½å¤ å°æ–¼æ–°ç‰ˆæ–‡ä»¶çš„é‡æ–°é–±è®€å¯ä»¥æ“æœ‰æ–°çš„ç†è§£ï¼Œå› æ­¤èˆ‰è¾¦äº† Rereact club è®€æ›¸æœƒï¼Œä»¥ä¸‹çš„ç­†è¨˜ç‚ºæˆ‘å°è®€è©²é€±ä¸¦ä¸”åƒç…§ React å®˜æ–¹æ–‡ä»¶å’Œå…¶ä»–ç¶²è·¯è³‡æºåŠ ä¸Šè‡ªèº«ç†è§£æ‰€æ§‹æˆçš„ç­†è¨˜ã€‚ä¹Ÿå¸Œæœ›é€™äº›ç­†è¨˜èƒ½å°ä½ æœ‰æ‰€å¹«åŠ©ğŸ˜†ã€‚

## åƒè€ƒè³‡æ–™
> [React å®˜æ–¹ Twitter](https://twitter.com/reactjs/status/1636441676506906626)
> [Everything You Need to Know About the Updated React Docs](https://dev.to/kathryngrayson/whats-new-in-the-updated-react-docs-on2)
> [Ten years of React, and new documentation site has framework opinions to share](https://devclass.com/2023/03/21/ten-years-of-react-and-new-documentation-site-has-framework-opinions-to-share/)

## å®šç¾© Component

React component æ˜¯ä¸€å€‹å‡½å¼ï¼Œä½ å¯ä»¥æ”¾å…¥æ¨™è¨˜èªè¨€åœ¨ Javascript ç•¶ä¸­

éµå¾ªä»¥ä¸‹æ­¥é©Ÿ

1. åŒ¯å‡º component
2. å®šç¾© function(å¿…é ˆå¤§å¯«é–‹é ­)
3. æ·»åŠ æ¨™è¨˜èªè¨€
4. è‹¥å¤šè¡Œæ³¨æ„ Return å¾—åŠ å°æ‹¬è™Ÿ

```jsx
export default function Profile() {
  return (
    <img
      src="https://i.imgur.com/MK3eW3Am.jpg"
      alt="Katherine Johnson"
    />
  )
}
```

> [Defining a component ](https://zh-hant.react.dev/learn/your-first-component#defining-a-component)

## å®šç¾© Component ç‚ºå¤§å¯«é–‹é ­

React å¯ä»¥å¾ˆå®¹æ˜“çš„è¾¨èªå°å¯«é–‹é ­çš„æ˜¯ HTMLtagã€å¤§å¯«é–‹é ­çš„æ˜¯ React Componentï¼Œå¦å¤– React å…ƒä»¶æ˜¯ä¸€èˆ¬çš„ JavaScript å‡½å¼ï¼Œä½†å®ƒå€‘çš„åç¨±å¿…é ˆä»¥å¤§å¯«å­—æ¯é–‹é ­ï¼Œå¦å‰‡å®ƒå€‘å°‡ç„¡æ³•é‹ä½œï¼

```jsx
export default function Gallery() {
  return (
    <section>
      <h1>Amazing scientists</h1>
      <Profile />
      <Profile />
      <Profile />
    </section>
  );
}
```

ä¾‹å¦‚`<Profile />`ä»¥å¤§å¯«å­—æ¯ P é–‹é ­ï¼Œé€™æ¨£ React å°±çŸ¥é“æˆ‘å€‘æƒ³ä½¿ç”¨åç‚º Profile çš„å…ƒä»¶ã€‚

## Top-level çš„ Component

åˆ‡å‹¿å·¢ç‹€å¼å®šç¾© Componentï¼Œå¦‚ä¸‹æ–¹ï¼Œæˆ‘å€‘åœ¨ Gallery Component åˆå®šç¾©äº† Profile Componentã€‚æ›å¥è©±èªªæœƒé€ æˆæŸäº›æ•ˆèƒ½å•é¡Œå¯ä»¥åƒè€ƒ[Different components at the same position reset state ](https://react.dev/learn/preserving-and-resetting-state#different-components-at-the-same-position-reset-state)

```jsx
export default function Gallery() {
  // ğŸ”´ ä¸è¦åœ¨æŸå€‹ Component å…§å®šç¾©å…¶ä»– Component
  function Profile() {
    // ...
  }
  // ...
}
```

## JSX æœ¬è³ªä¸æ˜¯ HTMLï¼Œå…·æœ‰æ›´å¤šè¦å‰‡

jsx ä¸¦ä¸å®Œå…¨æ˜¯ htmlï¼Œæ ¹æ“š[Converting HTML to JSX](https://react.dev/learn/writing-markup-with-jsx#converting-html-to-jsx)çš„å…§å®¹æåŠï¼Œç”±æ–¼ JSX æ¯” HTML æœ‰æ›´å¤šçš„è¦å‰‡ã€‚

### å¿…é ˆå–®ä¸€ root element

ç©ºçš„ tag è¢«ç¨±ä¹‹ç‚º Fragmentï¼Œå®ƒå¯ä»¥è®“ä½ ç¾¤çµ„åŒ–å¤šå€‹ tagï¼Œè€Œä¸æœƒé€ æˆå¤šé¤˜çš„ DOM æ¨¹ã€‚

```jsx
<Fragment><Fragment/>

//ä½†é€šå¸¸æ˜¯æ’°å¯«<>...</>
```

> [react-Fragment](https://react.dev/reference/react/Fragment)

### é—œé–‰æ‰€æœ‰çš„æ¨™ç±¤

åœ¨ JSX ä¸­ï¼Œæ¨™ç±¤éœ€è¦æ˜ç¢ºåœ°é€²è¡Œé—œé–‰ï¼Œè¢«ç¨±ç‚º**self-closing tags**å¦‚`<img>`å¿…é ˆå¯«æˆ`<img />`ï¼Œè€Œ**wrapping tags**å¦‚`<li>oranges`å‰‡éœ€è¦å¯«æˆ`<li>oranges</li>`

### å¤§å¤šæ•¸çš„å±¬æ€§å°é§å³°

ä¾‹å¦‚ class æ˜¯ javascript çš„å±¬æ€§ï¼Œå› æ­¤åœ¨ React çš„ jsx å¿…é ˆä½¿ç”¨ classNameï¼Œå¦å¤– Javascript å°æ–¼è®Šæ•¸å‘½åæœ‰é™åˆ¶ï¼Œæ‰€ä»¥ä¸åŒ…å«ç ´æŠ˜è™Ÿã€‚é€™ä¹Ÿæ˜¯ç‚ºä»€éº¼åœ¨ SVG æ˜¯

è‹¥ä½ ä¸ç¢ºå®šå“ªå€‹å±¬æ€§éœ€è¦å°é§å³°å¯ä»¥è§€çœ‹[ç›¸å°æ‡‰çš„ DOM å±¬æ€§](https://developer.mozilla.org/en-US/docs/Web/API/Element/className)

éœ€è¦æ³¨æ„çš„åœ°æ–¹æ˜¯ç”±æ–¼æ­·å²åŸå› ï¼Œaria-å’Œ data éœ€è¦ç”¨ç ´æŠ˜è™Ÿæ’°å¯«ã€‚

### å¸¸è¦‹ component

- dangerouslySetInnerHTMLï¼šä¸€å€‹ä»¥ `{ __html: '<p>ä¸€äº›HTML</p>' }`å½¢å¼çš„ç‰©ä»¶ï¼Œå…§éƒ¨åŒ…å«åŸå§‹çš„ HTML å­—ä¸²ã€‚è¦†è“‹äº† DOM ç¯€é»çš„ innerHTML å±¬æ€§ä¸¦é¡¯ç¤ºå‚³éçš„ HTML å…§å®¹ã€‚é€™æ‡‰è©²è¦éå¸¸è¬¹æ…åœ°ä½¿ç”¨ï¼å¦‚æœå…§éƒ¨çš„ HTML ä¸å—ä¿¡ä»»ï¼ˆä¾‹å¦‚ï¼Œå¦‚æœå®ƒåŸºæ–¼ä½¿ç”¨è€…è³‡æ–™ï¼‰ï¼Œä½ æœ‰å¯èƒ½å¼•å…¥è·¨ç«™è…³æœ¬æ”»æ“Šï¼ˆXSSï¼‰çš„é¢¨éšªã€‚è©³ç´°äº†è§£æœ‰é—œä½¿ç”¨ dangerouslySetInnerHTML çš„æ›´å¤šè³‡è¨Šã€‚
- htmlForï¼šä¸€å€‹å­—ä¸²ã€‚å°æ–¼`<label>`å’Œ`<output>`æ¨™ç±¤ï¼Œå®ƒå…è¨±ä½ å°‡æ¨™ç±¤èˆ‡æŸå€‹ input ç›¸é—œè¯ã€‚èˆ‡ HTML å±¬æ€§ç›¸åŒã€‚React ä½¿ç”¨æ¨™æº–çš„ DOM å±¬æ€§åç¨±ï¼ˆhtmlForï¼‰è€Œä¸æ˜¯ HTML å±¬æ€§åç¨±

> [Common components](https://react.dev/reference/react-dom/components/common)

### HTML è½‰æ› JSX-è½‰æ›å™¨

è‹¥ä¸ç¢ºå®šå“ªäº› HTML å’Œ JSX æ’°å¯«æœ‰å“ªäº›å·®åˆ¥çš„è©±å¯ä»¥ä½¿ç”¨[è½‰æ›å™¨](https://transform.tools/html-to-jsx)

## åœ¨ JSX ä¸­ä½¿ç”¨è®Šæ•¸

### ä½¿ç”¨å¤§æ‹¬è™Ÿè¡¨ç¤ºè®Šæ•¸

åŸºæœ¬ä¸Š JSX æ˜¯ä¸€ç¨®ç‰¹æ®Šçš„ Javascript æ’°å¯«æ¨¡å¼ï¼Œæˆ‘å€‘å¯ä»¥åˆ©ç”¨èŠ±æ‹¬è™Ÿå›å‚³è³‡æ–™ä¾†é¡¯ç¤ºç•«é¢
å¦‚ä¸‹

```jsx
export default function TodoList() {
  const name = 'Gregorio Y. Zara';
  return (
    <h1>{name}'s To Do List</h1>
  );
}
```

### ä½¿ç”¨ inline style-é§å³°å¼çš„æ¨£å¼

å¦å¤–æ’°å¯« inline style ä¹Ÿæ˜¯ä½¿ç”¨èŠ±æ‹¬è™Ÿç”¨ä¾†å‚³éè®Šæ•¸ï¼Œè€Œå‚³éçµ¦ style çš„ä¹Ÿæ˜¯ä¸€å€‹ç‰©ä»¶ï¼Œå› æ­¤ä½ å¯èƒ½æœƒçœ‹åˆ°ä»¥ä¸‹é›™èŠ±æ‹¬è™Ÿç¨‹å¼ç¢¼

```jsx
export default function TodoList() {
  return (
    <ul style={{
      backgroundColor: 'black',
      color: 'pink'
    }}>
      <li>Improve the videophone</li>
      <li>Prepare aeronautics lectures</li>
      <li>Work on the alcohol-fuelled engine</li>
    </ul>
  );
}
```

ç•¶ä½ é€™æ¨£å¯«æ™‚ï¼Œä½ çœŸçš„å¯ä»¥çœ‹åˆ°å¤§æ‹¬è™Ÿå…§çš„ JavaScript ç‰©ä»¶ï¼Œåƒæ˜¯ç‰©ä»¶çš„èƒŒæ™¯é¡è‰²ã€‚

## ç‰¹åˆ¥çš„è®Šæ•¸ props

### å¾çˆ¶çµ„ä»¶å®šç¾©ä¸¦å‚³é props

åœ¨ react ä¸­æˆ‘å€‘å¯ä»¥å¾çˆ¶çµ„ä»¶å‚³éè®Šæ•¸çµ¦å­çµ„ä»¶ï¼Œæˆ‘å€‘å°‡å‚³éçµ¦å­çµ„ä»¶çš„è®Šæ•¸ç¨±ç‚º props

è€Œçˆ¶çµ„ä»¶ä¸­é€é props å‚³éå€¼åˆ° Component ä¸­ï¼Œå…¶æ–¹å¼å°±æ˜¯åœ¨ tag ç•¶ä¸­æ·»åŠ è‡ªå®šç¾©çš„ attributeã€‚
ç¨‹å¼ç¢¼å¦‚ä¸‹

```jsx
export default function Profile() {
  return (
    <Avatar
      person={{ name: 'Lin Lanying', imageId: '1bX5QH6' }}
      size={100}
    />
  );
}
```

> åƒè€ƒè³‡æ–™[Passing props to a component](https://react.dev/learn/passing-props-to-a-component#passing-props-to-a-component)

### å¾å­çµ„ä»¶æ¥æ”¶è®Šæ•¸

åœ¨å­çµ„ä»¶ä¸­å¯ä»¥æ¥æ”¶åˆ°ä¸€å€‹ç‰©ä»¶ï¼Œé€šå¸¸æˆ‘å€‘æœƒå‘½åç‚º propsï¼Œè£¡é¢åŒ…å«çˆ¶å±¤æ‰€å‚³éçµ¦å­å…ƒä»¶çš„å…§å®¹

å¦‚ä¸‹

```javascript
function Avatar(props) {
  let person = props.person;
  let size = props.size;
  // ...
}
```

### å­çµ„ä»¶è§£æ§‹å­˜å–è®Šæ•¸

é€šå¸¸æˆ‘å€‘æœƒåœ¨å­å±¤ç›´æ¥è§£æ§‹æ–¹ä¾¿å­˜å–è®Šæ•¸ï¼Œå¦‚ä¸‹

```jsx
function Avatar({ person, size }) {
  return (
    <img
      className="avatar"
      src={getImageUrl(person)}
      alt={person.name}
      width={size}
      height={size}
    />
  );
}
```

### å­çµ„ä»¶å®šç¾©é è¨­å€¼

ç•¶ç„¶å¦‚æœæ²’æœ‰æ¥æ”¶åˆ° propsï¼Œæˆ‘å€‘ä¹Ÿå¯ä»¥çµ¦äºˆé è¨­å€¼ï¼Œèˆ‡ä¸€ Javascript è¨­å®š function é è¨­å€¼çš„æ–¹å¼ä¸€æ¨£ã€‚å¦‚ä¸‹

```jsx
function Avatar({ person, size = 100 }) {
  // ...
}
```

### è½‰ç™¼ props

æœ‰æ™‚å€™æˆ‘å€‘åœ¨å‚³é props çš„æ™‚å€™å¿…é ˆé‡è¤‡è§£æ§‹å†å‚³éçµ¦å­å±¤ï¼Œé€™äº›éç¨‹éæ–¼ç¹ç‘£ï¼Œç•¶å‚³ééç¨‹ä¸­çš„å…ƒä»¶ä¸¦æœªå¯¦éš›ä½¿ç”¨å…¶ props çš„å…§å®¹çš„è©±ï¼Œæˆ‘å€‘å¯ä»¥å–„ç”¨ spread èªæ³•ä¾†è½‰ç™¼å¦‚ä¸‹

```jsx
function Profile(props) {
  return (
    <div className="card">
      <Avatar {...props} />
    </div>
  );
}
```

> åƒè€ƒè³‡æ–™[Forwarding props with the JSX spread syntax](https://react.dev/learn/passing-props-to-a-component#forwarding-props-with-the-jsx-spread-syntax)

## ç‰¹åˆ¥çš„è®Šæ•¸-chiildren

### å·¢ç‹€çš„ Component

æœ‰æ™‚å€™æˆ‘å€‘æœƒå¸Œæœ›æ’°å¯«åƒæ˜¯ html çš„å·¢ç‹€å½¢å¼å¦‚ä¸‹

```jsx
<Card>
  <Avatar />
</Card>
```

é€™æ™‚å€™ç•¶æ’°å¯«åœ¨ Component ä¸­é–“æ™‚ï¼Œæˆ‘å€‘æœƒå°‡å…¶å…§å®¹å‚³éçµ¦ Card å…ƒä»¶ï¼Œå…¶å…§å®¹æœƒé™„å±¬åœ¨ children è®Šæ•¸ä¸Šé¢ï¼Œå¯ä»¥é€éè§£æ§‹çš„æ–¹å¼å°‡å€¼å–å‡ºå¦‚ä¸‹

```jsx
function Card({ children }) {
  return (
    <div className="card">
      {children}
    </div>
  );
}
```

è—‰ç”±ä½¿ç”¨ children çš„æ–¹å¼ï¼Œæˆ‘å€‘å¯ä»¥æ›´å¥½é–±è®€å‚³éçš„å…§å®¹ã€‚

> åƒè€ƒè³‡æ–™[Passing JSX as children](https://react.dev/learn/passing-props-to-a-component#passing-props-to-a-component)

### immutable çš„ props

å‚³éä¸€å€‹æ–°çš„ props è€Œä¸è¦æ”¹è®ŠåŸå…ˆçš„ props çš„å€¼ã€‚æ›å¥è©±èªªï¼Œçˆ¶å±¤å‚³éçµ¦å­å±¤çš„ props æ°¸é éƒ½æ˜¯æ–°çš„å€¼ï¼Œè€Œéæ”¹è®ŠåŸå…ˆçš„å€¼ï¼Œé€™ç‰½æ‰¯åˆ°ç‰©ä»¶æ‰€å„²å­˜çš„æ–¹å¼æ˜¯ reference çš„æ©Ÿåˆ¶æ›´å¤šå¯ä»¥åƒè€ƒ[Immutable object](https://en.wikipedia.org/wiki/Immutable_object)

## æ¢ä»¶æ¸²æŸ“

### ä½¿ç”¨ if else æ±ºå®šæ¸²æŸ“å…§å®¹

åœ¨å®šç¾© component çš„å‡½å¼ï¼Œæˆ‘å€‘æœƒå›å‚³ä¸€å€‹ jsxï¼Œæˆ‘å€‘å¯ä»¥é€éä¸åŒçš„ if else æ–¹å¼å›å‚³ä¸åŒçš„ jsx

å¦‚ä¸‹

```jsx
if (isPacked) {
  return <li className="item">{name} âœ”</li>;
}
return <li className="item">{name}</li>;
```

### nullã€falseã€undefined ä¸æ¸²æŸ“

è‹¥æˆ‘å€‘å¸Œæœ›æŸäº›æ¢ä»¶ä¸‹ä¸è¦é€²è¡Œæ¸²æŸ“çš„è©±ï¼Œæˆ‘å€‘å¯ä»¥ return null

```jsx
if (isPacked) {
  return null;
}
return <li className="item">{name}</li>;
```

### ä¸‰å…ƒé‹ç®—å­æ±ºå®šæ¸²æŸ“å…§å®¹

æŸäº›æƒ…å½¢æˆ‘å€‘å¸Œæœ›ç•¶æ¢ä»¶æ˜¯ true çš„æ™‚å€™æ¸²æŸ“ Aï¼Œfalse çš„æ™‚å€™æ¸²æŸ“ B æˆ‘å€‘å¯ä»¥æ”¹ç”¨ä¸‰å…ƒé‹ç®—å­ (ternary operator)

å¦‚ä¸‹

```jsx
return (
  <li className="item">
    {isPacked ? name + ' âœ”' : name}
  </li>
);
```

ç•¶ç„¶ä¹Ÿå¯ä»¥æ‡‰ç”¨åœ¨æ¸²æŸ“ jsx ä¸Šé¢

```jsx
function Item({ name, isPacked }) {
  return (
    <li className="item">
      {isPacked
        ? (
        <del>
          {name + ' âœ”'}
        </del>
      ) : (
        name
      )}
    </li>
  );
}
```

### ä½¿ç”¨é‚è¼¯é‹ç®—å­æ±ºå®šæ¸²æŸ“

é‚è¼¯é‹ç®—å­ AND å¸¸è¦‹ç”¨ä¾†é¸æ“‡æ€§çš„ç•¶å‰é¢çš„å…§å®¹ç‚º true æ™‚æ‰æ¸²æŸ“ jsx

å¦‚ä¸‹

```jsx
return (
  <li className="item">
    {name} {isPacked && 'âœ”'}
  </li>
);
```

> åƒè€ƒè³‡æ–™[Logical AND operator (&&)](https://react.dev/learn/conditional-rendering#logical-and-operator-)

## æ³¨æ„äº‹é …-falseã€undefinedã€null å°‡ä¸æ¸²æŸ“

å¦‚ä¸Šå…§å®¹ä¸€å€‹ JavaScript çš„&&è¡¨é”å¼ï¼Œå¦‚æœå·¦å´ï¼ˆæˆ‘å€‘çš„æ¢ä»¶ï¼‰ç‚º trueï¼Œå‰‡å›å‚³å³å´çš„å€¼ï¼ˆåœ¨æˆ‘å€‘çš„ä¾‹å­ä¸­ï¼Œç‚ºå‹¾é¸æ¨™è¨˜ï¼‰ã€‚ä½†æ˜¯å¦‚æœæ¢ä»¶ç‚º falseï¼Œæ•´å€‹è¡¨é”å¼å‰‡ç‚º falseã€‚åœ¨ JSX æ¨¹ä¸­ï¼ŒReact å°‡ false è¦–ç‚ºä¸€å€‹"hole"ï¼Œå°±åƒ null æˆ– undefined ä¸€æ¨£ï¼Œåœ¨å…¶ä½ç½®ä¸Šä¸æ¸²æŸ“ä»»ä½•å…§å®¹ã€‚

é›–ç„¶å·¦å´å¦‚æœæ˜¯ undefined æˆ–è€… null æˆ–è€… false å°‡ä¸æœƒæ¸²æŸ“ä»»ä½•æ±è¥¿ï¼Œå°æ–¼æ•¸å­—å¦‚æœå·¦å´æ˜¯ 0ï¼Œé‚£éº¼æ•´å€‹è¡¨é”å¼å°‡å–å¾—è©²å€¼ï¼ˆ0ï¼‰ï¼Œä¸¦ä¸” React å°‡æ¸²æŸ“ 0 è€Œä¸æ˜¯ç©ºå€¼ã€‚

ç‚ºäº†é¿å…æ¸²æŸ“éé æœŸçš„é›¶ï¼Œè«‹å°‡å·¦å´è®Šæˆå¸ƒæ—å€¼ï¼Œä¾‹å¦‚

```jsx
number > 0 && <p>æ–°è¨Šæ¯</p>
```

## ä½¿ç”¨ map æˆ–æ˜¯ filter æ¸²æŸ“ list

èˆ‡ vue çš„ v-for ä¸€æ¨£å¿…é ˆæ”¾å…¥ keyï¼Œç”¨ä¾†å‘Šè¨´ React æ¯å€‹å…ƒä»¶å°æ‡‰åˆ°é™£åˆ—ä¸­çš„å“ªå€‹ itemï¼Œä»¥ä¾¿ç¨å¾Œå¯ä»¥å°æ‡‰å®ƒå€‘ã€‚é€™åœ¨é™£åˆ— item å¯ä»¥ç§»å‹•ï¼ˆä¾‹å¦‚æ’åºï¼‰ã€æ’å…¥æˆ–åˆªé™¤æ™‚è®Šå¾—é‡è¦ã€‚ä¸€å€‹ç²¾å¿ƒé¸æ“‡çš„ key å¯ä»¥å¹«åŠ© React æ¨æ–·ç™¼ç”Ÿäº†ä»€éº¼ï¼Œä¸¦å° DOM æ¨¹é€²è¡Œæ­£ç¢ºçš„æ›´æ–°ã€‚

ç•¶ item ä¸¦éå–®ä¸€ root elelment æ™‚ï¼Œç„¡æ³•ä½¿ç”¨`<></>`ï¼Œåœ¨é€™æ¨£çš„æƒ…æ³å°±å¾—ä½¿ç”¨ Fragment
å¦‚ä¸‹

```jsx
import { Fragment } from 'react';

// ...

const listItems = people.map(person =>
  <Fragment key={person.id}>
    <h1>{person.name}</h1>
    <p>{person.bio}</p>
  </Fragment>
);
```

## ä½¿ç”¨å”¯ä¸€ä¸”ä¸æœƒè®Šå‹•çš„ key

### è¨­ç½®çš„ key ç‚ºä½•ï¼Ÿ

- å¾è³‡æ–™åº«ä¸­ç²å–çš„è³‡æ–™ï¼šå¦‚æœä½ çš„è³‡æ–™ä¾†è‡ªè³‡æ–™åº«ï¼Œä½ å¯ä»¥ä½¿ç”¨è³‡æ–™åº«çš„ key/IDï¼Œé€™äº› key æœ¬è³ªä¸Šæ˜¯å”¯ä¸€çš„ã€‚
- æœ¬åœ°ç”Ÿæˆçš„è³‡æ–™ï¼šå¦‚æœä½ çš„è³‡æ–™æ˜¯åœ¨æœ¬åœ°ç”Ÿæˆä¸¦æŒä¹…åŒ–ï¼ˆä¾‹å¦‚ç­†è¨˜æ‡‰ç”¨ä¸­çš„ç­†è¨˜ï¼‰ï¼Œåœ¨å»ºç«‹é …ç›®æ™‚ä½¿ç”¨éå¢çš„è¨ˆæ•¸å™¨ã€crypto.randomUUID() æˆ–åƒ uuid é€™æ¨£çš„å¥—ä»¶ã€‚

### key çš„è¦å‰‡

- key åœ¨ sinblings ä¸­å¿…é ˆæ˜¯å”¯ä¸€çš„ã€‚ä½†æ˜¯åœ¨ä¸åŒçš„é™£åˆ—ä¸­çš„ JSX ç¯€é»ä¸­ä½¿ç”¨ç›¸åŒçš„ key æ˜¯å¯ä»¥çš„ã€‚
- key ä¸æ‡‰è©²åœ¨æ¸²æŸ“éç¨‹ä¸­æ›´æ”¹ï¼Œå¦å‰‡å°±å¤±å»äº†å®ƒå€‘çš„ç›®çš„ï¼ä¸è¦åœ¨æ¸²æŸ“æ™‚ç”Ÿæˆ keyã€‚

### ç‚ºä»€éº¼ React éœ€è¦ keyï¼Ÿ

æƒ³åƒä¸€ä¸‹ï¼Œå¦‚æœæ¡Œé¢ä¸Šçš„æ–‡ä»¶æ²’æœ‰åç¨±ï¼Œè€Œæ˜¯æ ¹æ“šå®ƒå€‘çš„é †åºä¾†å¼•ç”¨ **ç¬¬ä¸€å€‹æ–‡ä»¶ï¼Œç¬¬äºŒå€‹æ–‡ä»¶ï¼Œä»¥æ­¤é¡æ¨**ã€‚

ä½ å¯èƒ½æœƒé©æ‡‰é€™ç¨®æ–¹å¼ï¼Œä¸éä¸€æ—¦åˆªé™¤ä¸€å€‹æ–‡ä»¶ï¼Œæƒ…æ³å°±æœƒè®Šå¾—ååˆ†è¤‡é›œã€‚**ç¬¬äºŒå€‹æ–‡ä»¶å°‡æˆç‚ºç¬¬ä¸€å€‹æ–‡ä»¶ï¼Œç¬¬ä¸‰å€‹æ–‡ä»¶å°‡æˆç‚ºç¬¬äºŒå€‹æ–‡ä»¶ï¼Œä»¥æ­¤é¡æ¨**ã€‚

è³‡æ–™å¤¾ä¸­çš„æ–‡ä»¶åå’Œé™£åˆ—ä¸­çš„ JSX key å…·æœ‰é¡ä¼¼çš„ç”¨é€”ã€‚å®ƒå€‘è®“æˆ‘å€‘å¯ä»¥åœ¨å…„å¼Ÿå…ƒç´ ä¹‹é–“å”¯ä¸€è­˜åˆ¥ä¸€å€‹ itemã€‚ä¸€å€‹ç²¾å¿ƒé¸æ“‡çš„ key æä¾›çš„è¨Šæ¯æ¯”é™£åˆ—ä¸­çš„ä½ç½®æ›´å¤šã€‚å³ä½¿ç”±æ–¼é‡æ–°æ’åºè€Œæ”¹è®Šä½ç½®ï¼Œkey ä¹Ÿå¯ä»¥è®“ React åœ¨æ•´å€‹ç”Ÿå‘½é€±æœŸä¸­è­˜åˆ¥è©² itemã€‚

> åƒè€ƒè³‡æ–™[Rules of keys](https://react.dev/learn/rendering-lists#rules-of-keys)

## ä½¿ç”¨ pure funciton ä½œç‚º component

åœ¨ React çš„æ’°å¯«ç•¶ä¸­ Component çš„å®šç¾©å¿…é ˆæ˜¯ç´” functionï¼Œä»¥ä¸‹ä½¿ç”¨ side effect ä½œç‚ºç¯„ä¾‹æœƒå°è‡´éé æœŸçµæœã€‚

### å‰¯ä½œç”¨ï¼šï¼ˆéï¼‰é æœŸçš„å¾Œæœ

ä»¥ä¸‹ç‚º side effect ç¤ºç¯„ï¼Œside effect

```jsx
let guest = 0;

function Cup() {
  //ç³Ÿç³•çš„ä½œæ³•å°æ–¼ä¿®æ”¹ä¸€å€‹å·²å­˜åœ¨çš„è®Šæ•¸
  guest = guest + 1;
  return <h2>Tea cup for guest #{guest}</h2>;
}

export default function TeaSet() {
  return (
    <>
      <Cup />
      <Cup />
      <Cup />
    </>
  );
}
```

æœ€å¾Œå¯¦éš›ç•«é¢å¦‚ä¸‹ (å‚™è¨»)

![](https://hackmd.io/_uploads/BJ21IEjrn.png)

ç”±æ–¼æˆ‘å€‘ä½¿ç”¨<span class="code red">StrictMode</span>ä»¥è‡³æ–¼æœƒé‡è¤‡é¸æŸ“ä¸€æ¬¡ï¼Œå°è‡´ç•«é¢çš„æ•¸å­—æ˜¯ 2ã€4ã€6ï¼Œå˜—è©¦è‘—å°‡ StrictMode è¨»è§£å¾Œï¼Œæ•¸å­—å°±æœƒæ˜¯ 1ã€2ã€3

### ä½¿ç”¨ç´”å‡½å¼

```jsx
function Cup({ guest }) {
  return <h2>Tea cup for guest #{guest}</h2>;
}

export default function TeaSet() {
  return (
    <>
      <Cup guest={1} />
      <Cup guest={2} />
      <Cup guest={3} />
    </>
  );
}
```

å¦‚æœ cups è®Šæ•¸æˆ–`[]`é™£åˆ—åœ¨ TeaGathering å‡½å¼ä¹‹å¤–å»ºç«‹ï¼Œé€™å°‡æ˜¯ä¸€å€‹å·¨å¤§çš„å•é¡Œï¼ä½ å°‡é€šéå‘è©²é™£åˆ—æ·»åŠ é …ç›®ä¾†æ›´æ”¹ä¸€å€‹å·²å­˜åœ¨çš„ç‰©ä»¶ã€‚

ä½†æ˜¯ï¼Œé€™ä¸¦æ²’æœ‰å•é¡Œï¼Œå› ç‚ºä½ åœ¨åŒä¸€æ¬¡æ¸²æŸ“ä¸­ï¼Œåœ¨ TeaGathering å…§éƒ¨å»ºç«‹äº†å®ƒå€‘ã€‚TeaGathering ä¹‹å¤–çš„ç¨‹å¼ç¢¼æ°¸é ä¸æœƒçŸ¥é“ç™¼ç”Ÿäº†ä»€éº¼ã€‚é€™è¢«ç¨±ç‚º local mutationï¼Œå°±åƒä½ çµ„ä»¶çš„å°ç§˜å¯†ä¸€æ¨£ã€‚

ç¨‹å¼ç¢¼å¦‚ä¸‹
```jsx
function Cup({ guest }) {
  return <h2>Tea cup for guest #{guest}</h2>;
}

export default function TeaGathering() {
  let cups = [];
  for (let i = 1; i <= 12; i++) {
    cups.push(<Cup key={i} guest={i} />);
  }
  return cups;
}

```

### æœ‰äº›æ™‚å€™éœ€è¦å‰¯ä½œç”¨

é›–ç„¶ functional program éå¸¸ä¾è³´ç´”å‡½å¼ï¼Œä½†åœ¨æŸå€‹åœ°æ–¹ï¼ŒæŸäº›æ±è¥¿å¿…é ˆç™¼ç”Ÿè®ŠåŒ–ã€‚

è«¸å¦‚ä»¥ä¸‹è®ŠåŒ–è¢«ç¨±ç‚ºå‰¯ä½œç”¨ã€‚å®ƒå€‘æ˜¯"åœ¨ä¸€é‚Š"ç™¼ç”Ÿçš„äº‹æƒ…ï¼Œè€Œä¸æ˜¯åœ¨æ¸²æŸ“éç¨‹ä¸­ã€‚

- æ›´æ–°å±å¹•
- é–‹å§‹å‹•ç•«
- æ›´æ”¹æ•¸æ“š

åœ¨ React ä¸­ï¼Œå‰¯ä½œç”¨é€šå¸¸å±¬æ–¼**äº‹ä»¶è™•ç†å™¨**ã€‚äº‹ä»¶è™•ç†å™¨æ˜¯åœ¨åŸ·è¡ŒæŸäº›æ“ä½œæ™‚ï¼ˆä¾‹å¦‚é»æ“ŠæŒ‰éˆ•ï¼‰React é‹è¡Œçš„å‡½å¼ã€‚å„˜ç®¡äº‹ä»¶è™•ç†å™¨åœ¨çµ„ä»¶å…§éƒ¨å®šç¾©ï¼Œä½†å®ƒå€‘ä¸åœ¨æ¸²æŸ“æœŸé–“é‹è¡Œï¼

å› æ­¤ï¼Œ<span class="red">äº‹ä»¶è™•ç†å™¨ä¸éœ€è¦æ˜¯ç´”å‡½å¼</span>ã€‚

å¦‚æœä½ å·²ç¶“å˜—è©¦äº†æ‰€æœ‰å…¶ä»–é¸é …ï¼Œæ‰¾ä¸åˆ°åˆé©çš„äº‹ä»¶è™•ç†å™¨ä¾†è™•ç†å‰¯ä½œç”¨ï¼Œä»ç„¶å¯ä»¥ä½¿ç”¨åœ¨çµ„ä»¶ä¸­çš„å›å‚³çš„ JSX ä¸­çš„ useEffect å‘¼å«ä¾†é™„åŠ å®ƒã€‚é€™å‘Šè¨´ React åœ¨æ¸²æŸ“å¾Œã€åœ¨å…è¨±å‰¯ä½œç”¨æ™‚åŸ·è¡Œå®ƒã€‚ç„¶è€Œï¼Œé€™ç¨®æ–¹æ³•æ‡‰è©²æ˜¯æœ€å¾Œçš„é¸æ“‡ã€‚

## ä¸ç”¨ç­‰å¾…æ•¸æ“šè®ŠåŒ–è€Œæ˜¯æ¯æ¬¡è—‰ç”±ç´”å‡½å¼é‹ç®—çµæœè¡¨ç¤ºæ¸²æŸ“çµæœ

æ’°å¯«ç´”å‡½å¼éœ€è¦ä¸€äº›ç¿’æ…£å’Œç´€å¾‹ã€‚

ç´”å‡½å¼çš„å„ªé»å¦‚ä¸‹

- ä½ çš„å…ƒä»¶å¯ä»¥åœ¨ä¸åŒçš„ç’°å¢ƒä¸­é‹è¡Œï¼Œä¾‹å¦‚åœ¨ä¼ºæœå™¨ä¸Šï¼ç”±æ–¼å®ƒå€‘é‡å°ç›¸åŒçš„è¼¸å…¥å›å‚³ç›¸åŒçš„çµæœï¼Œä¸€å€‹å…ƒä»¶å¯ä»¥æ»¿è¶³å¤šå€‹ä½¿ç”¨è€…çš„è«‹æ±‚ã€‚
- é€šé**è·³éé‚£äº›è¼¸å…¥æœªæ›´æ”¹çš„å…ƒä»¶çš„æ¸²æŸ“**ï¼Œä½ ä»¥æé«˜æ€§èƒ½ã€‚é€™æ˜¯å®‰å…¨çš„ï¼Œå› ç‚ºç´”å‡½å¼å§‹çµ‚å›å‚³ç›¸åŒçš„çµæœï¼Œå› æ­¤å®ƒå€‘å¯ä»¥è¢«å®‰å…¨åœ°å¿«å–ã€‚å‚™è¨» 1
- å¦‚æœåœ¨æ¸²æŸ“æ·±å±¤å…ƒä»¶æ¨¹æ™‚ï¼ŒæŸäº›æ•¸æ“šç™¼ç”Ÿè®ŠåŒ–ï¼ŒReact å¯ä»¥é‡æ–°é–‹å§‹æ¸²æŸ“ï¼Œè€Œä¸æµªè²»æ™‚é–“å®Œæˆéæ™‚çš„æ¸²æŸ“ã€‚ç´”å‡ˆæ€§ä½¿å¾—åœ¨ä»»ä½•æ™‚å€™åœæ­¢è¨ˆç®—éƒ½æ˜¯å®‰å…¨çš„ã€‚

> ä½¿ç”¨ memo å¯ä»¥åœ¨çµ„ä»¶çš„ props æ²’æœ‰è®ŠåŒ–æ™‚è·³éé‡æ–°æ¸²æŸ“ï¼ˆre-renderï¼‰è©²çµ„ä»¶ã€‚[åƒè€ƒå®˜æ–¹æ–‡ä»¶-memo](https://react.dev/reference/react/memo)

æˆ‘å€‘æ­£åœ¨é–‹ç™¼çš„æ¯å€‹æ–°çš„ React åŠŸèƒ½éƒ½å……åˆ†åˆ©ç”¨ Pure çš„ç‰¹æ€§ã€‚å¾æ•¸æ“šæå–åˆ°å‹•ç•«å†åˆ°æ€§èƒ½ï¼Œä¿æŒå…ƒä»¶çš„ Pure çš„ç‰¹æ€§èƒ½å¤ ç™¼æ® React ç¨‹å¼æ¨¡å‹çš„å¨åŠ›ã€‚

ä¸€å€‹å…ƒä»¶å¿…é ˆæ˜¯ç´”å‡½å¼ï¼Œæ„æ€æ˜¯

- å®ƒåªé—œå¿ƒè‡ªèº«çš„äº‹å‹™ã€‚å®ƒä¸æ‡‰è©²æ”¹è®Šåœ¨æ¸²æŸ“ä¹‹å‰å­˜åœ¨çš„ä»»ä½•ç‰©ä»¶æˆ–è®Šæ•¸ã€‚
- ç›¸åŒçš„è¼¸å…¥ï¼Œç›¸åŒçš„è¼¸å‡ºã€‚çµ¦å®šç›¸åŒçš„è¼¸å…¥ï¼Œå…ƒä»¶æ‡‰è©²å§‹çµ‚å›å‚³ç›¸åŒçš„ JSXã€‚
- æ¸²æŸ“å¯ä»¥åœ¨ä»»ä½•æ™‚é–“ç™¼ç”Ÿï¼Œå› æ­¤å…ƒä»¶ä¸æ‡‰è©²ä¾è³´æ–¼å½¼æ­¤çš„æ¸²æŸ“é †åºã€‚
- ä½ ä¸æ‡‰è©²ä¿®æ”¹å…ƒä»¶ç”¨æ–¼æ¸²æŸ“çš„ä»»ä½•è¼¸å…¥ã€‚é€™åŒ…æ‹¬ propsã€state å’Œ contextã€‚ç‚ºäº†æ›´æ–°ç•«é¢ï¼Œæ‡‰è©²ä½¿ç”¨ "è¨­å®š" state è€Œä¸æ˜¯ä¿®æ”¹ç¾æœ‰çš„ç‰©ä»¶ã€‚

### æ›´æ”¹äº‹ç‰©çš„æ™‚æ©Ÿ

åœ¨ä¸€å€‹ function è—‰ç”± return JSX è¡¨é”å…ƒä»¶çš„é‚è¼¯ã€‚

- ç•¶ä½ éœ€è¦ "æ›´æ”¹äº‹ç‰©" æ™‚ï¼Œé€šå¸¸å¸Œæœ›åœ¨äº‹ä»¶è™•ç†å‡½å¼ä¸­åŸ·è¡Œã€‚
- æœ€å¾Œçš„é¸æ“‡ï¼Œä½ å¯ä»¥ä½¿ç”¨ useEffectã€‚

